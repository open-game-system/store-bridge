# Versioning Strategy for @open-game-system/store-bridge

This document explains our date-based versioning strategy for package releases.

## Version Format

We use the format: `major.YYYYMMDD.patch`

- **major**: Major version number (integer)
  - Incremented for breaking changes
  - Starts at 1 for initial release
  
- **YYYYMMDD**: Date of the release in 8-digit format
  - Example: `20250330` for March 30, 2025
  - Automatically generated by our CI
  
- **patch**: Counter for multiple releases on the same day
  - Starts at 0 for the first release of the day
  - Increments by 1 for each subsequent release on the same day

## Examples

```
1.20250330.0  - First release on March 30, 2025
1.20250330.1  - Second release on March 30, 2025
1.20250331.0  - First release on March 31, 2025
2.20250415.0  - First major version bump (breaking changes)
```

## Automated Versioning

Our CI pipeline automatically handles version management:

1. **Main Branch Releases**
   - Each successful merge to `main` triggers the version bump workflow
   - The date portion updates to the current date
   - If it's the first release of the day, patch is reset to 0
   - If there were already releases today, patch is incremented
   - A git tag is created with the new version
   - Package is published to npm with the `latest` tag

2. **Pull Request Builds**
   - PR builds create specialized versions for testing
   - Format: `major.YYYYMMDD.0-pr.number.hash`
   - Example: `1.20250330.0-pr.123.a1b2c3d`
   - Published to npm with PR-specific tags like `pr-123`
   - CI adds a comment to the PR with installation instructions

## Using Versions

### Installation

```bash
# Latest stable version
npm install @open-game-system/store-bridge

# Version from a specific PR
npm install @open-game-system/store-bridge@pr-123

# Exact version
npm install @open-game-system/store-bridge@1.20250330.0
```

### Version Dependency in package.json

```json
{
  "dependencies": {
    "@open-game-system/store-bridge": "^1.20250330.0"
  }
}
```

## Benefits of This Approach

1. **Clear Release Timeline**: Version numbers tell you exactly when a release was made
2. **Support for Multiple Daily Releases**: The patch component provides for multiple releases per day
3. **Automatic Management**: No manual version bumping needed
4. **Semver Compatibility**: Tools that expect semver still work with this format
5. **Isolated PR Testing**: Each PR gets its own installable version for testing

## Comparison with Traditional Semver

Traditional semantic versioning uses `major.minor.patch` where:

- `major`: Incremented for breaking changes (incompatible API changes)
- `minor`: Incremented for new features (backward-compatible additions)
- `patch`: Incremented for bug fixes (backward-compatible fixes)

Our approach differs by:
- Replacing the `minor` component with the release date
- Using the `patch` component specifically for same-day releases
- Providing more immediate information about when a version was released

## Version History

You can view the full version history with:

```bash
git tag -l | grep "^v[0-9]" | sort -V
```

Or view published versions on npm:

```bash
npm view @open-game-system/store-bridge versions
``` 